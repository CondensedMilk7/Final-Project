<div class="container">
  <ul>
    <div>
      <li><a routerLink="/home">Home</a></li>
      <li><i class="fa-solid fa-chevron-right"></i></li>
      <li>
        <a routerLink="/cart" routerLinkActive="active">Your Cart</a>
      </li>
    </div>
  </ul>
</div>

@if (isLoading$|async) {
<div class="spinner-container">
  <div class="lds-roller">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
} @if(cart$ | async ; as cart) {
<div class="cart-container">
  <div class="cart">
    @if(cart.length > 0) { @for (product of cart; track product._id) {
    <div class="cart-item">
      <div class="product-title">
        <img [src]="product.thumbnail" [alt]="product.title" />
        <div class="product-title-detail">
          <h3>{{ product.title | truncateString : 3 }}</h3>
          <p>{{ product.issueDate | date }}</p>
        </div>
      </div>
      <div class="product-details">
        <div class="price-quantity">
          <p>
            <span class="price-current">
              {{ product.price.current }}
            </span>
            <span class="price-currency">{{ product.price.currency }} </span>
          </p>
        </div>
        <button class="delete-button" (click)="onDeleteProduct(product._id)">
          <i class="fa-solid fa-trash"></i>
        </button>
      </div>
    </div>
    }}@else {
    <div class="cartEmpty">
      <p>Your Cart is currently empty</p>
      <button id="return" routerLink="/products">Return to Shop</button>
    </div>
    }
  </div>
  <div class="cart-checkout">
    <div class="items-quantity">
      <span>Cart</span>
      <div>{{ cart$.value.length }} items</div>
    </div>
    <div class="products-quantity">Products {{ cart$.value.length }}</div>
    <div class="total-cost">
      <span class="cost-title">Total Cost</span>
      <span class="cost">
        @if( totalCost$ | async ; as total){
        <span class="current">{{ total }}</span>
        }
        <span class="currency">GEL</span></span
      >
    </div>
    <div class="checkout-button">
      <button>Checkout</button>
    </div>
  </div>
</div>
}

<app-contact-us></app-contact-us>
